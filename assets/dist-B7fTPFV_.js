var e=`abort.canplay.canplaythrough.durationchange.emptied.encrypted.ended.error.loadeddata.loadedmetadata.loadstart.pause.play.playing.progress.ratechange.seeked.seeking.stalled.suspend.timeupdate.volumechange.waiting.waitingforkey.resize.enterpictureinpicture.leavepictureinpicture.webkitbeginfullscreen.webkitendfullscreen.webkitpresentationmodechanged`.split(`.`),t=[`autopictureinpicture`,`disablepictureinpicture`,`disableremoteplayback`,`autoplay`,`controls`,`controlslist`,`crossorigin`,`loop`,`muted`,`playsinline`,`poster`,`preload`,`src`];function n(e){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${o(e)}></audio>
    </slot>
    <slot></slot>
  `}function r(e){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${o(e)}></video>
    </slot>
    <slot></slot>
  `}function i(i,{tag:o,is:c}){let l=globalThis.document?.createElement?.(o,{is:c}),u=l?a(l):[];return class a extends i{static getTemplateHTML=o.endsWith(`audio`)?n:r;static shadowRootOptions={mode:`open`};static Events=e;static#e=!1;static get observedAttributes(){return a.#t(),[...l?.constructor?.observedAttributes??[],...t]}static#t(){if(this.#e)return;this.#e=!0;let e=new Set(this.observedAttributes);e.delete(`muted`);for(let t of u)if(!(t in this.prototype))if(typeof l[t]==`function`)this.prototype[t]=function(...e){return this.#o(),(()=>this.call?this.call(t,...e):(this.nativeEl?.[t])?.apply(this.nativeEl,e))()};else{let n={get(){this.#o();let n=t.toLowerCase();if(e.has(n)){let e=this.getAttribute(n);return e===null?!1:e===``?!0:e}return this.get?.(t)??this.nativeEl?.[t]}};t!==t.toUpperCase()&&(n.set=function(n){this.#o();let r=t.toLowerCase();if(e.has(r)){n===!0||n===!1||n==null?this.toggleAttribute(r,!!n):this.setAttribute(r,n);return}if(this.set){this.set(t,n);return}this.nativeEl&&(this.nativeEl[t]=n)}),Object.defineProperty(this.prototype,t,n)}}#n=!1;#r=null;#i=new Map;#a;get;set;call;get nativeEl(){return this.#o(),this.#r??this.querySelector(`:scope > [slot=media]`)??this.querySelector(o)??this.shadowRoot?.querySelector(o)??null}set nativeEl(e){this.#r=e}get defaultMuted(){return this.hasAttribute(`muted`)}set defaultMuted(e){this.toggleAttribute(`muted`,e)}get src(){return this.getAttribute(`src`)}set src(e){this.setAttribute(`src`,`${e}`)}get preload(){return this.getAttribute(`preload`)??this.nativeEl?.preload}set preload(e){this.setAttribute(`preload`,`${e}`)}#o(){this.#n||(this.#n=!0,this.init())}init(){if(!this.shadowRoot){this.attachShadow({mode:`open`});let e=s(this.attributes);c&&(e.is=c),o&&(e.part=o),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.nativeEl.muted=this.hasAttribute(`muted`);for(let e of u)this.#u(e);this.#a=new MutationObserver(this.#c.bind(this)),this.shadowRoot.addEventListener(`slotchange`,()=>this.#s()),this.#s();for(let e of this.constructor.Events)this.shadowRoot.addEventListener(e,this,!0)}handleEvent(e){e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail}))}#s(){let e=new Map(this.#i);((this.shadowRoot?.querySelector(`slot:not([name])`))?.assignedElements({flatten:!0}).filter(e=>[`track`,`source`].includes(e.localName))).forEach(t=>{e.delete(t);let n=this.#i.get(t);n||(n=t.cloneNode(),this.#i.set(t,n),this.#a?.observe(t,{attributes:!0})),this.nativeEl?.append(n),this.#l(n)}),e.forEach((e,t)=>{e.remove(),this.#i.delete(t)})}#c(e){for(let t of e)if(t.type===`attributes`){let{target:e,attributeName:n}=t,r=this.#i.get(e);r&&n&&(r.setAttribute(n,e.getAttribute(n)??``),this.#l(r))}}#l(e){e&&e.localName===`track`&&e.default&&(e.kind===`chapters`||e.kind===`metadata`)&&e.track.mode===`disabled`&&(e.track.mode=`hidden`)}#u(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}}attributeChangedCallback(e,t,n){this.#o(),this.#d(e,t,n)}#d(e,t,n){[`id`,`class`].includes(e)||!a.observedAttributes.includes(e)&&this.constructor.observedAttributes.includes(e)||(n===null?this.nativeEl?.removeAttribute(e):this.nativeEl?.getAttribute(e)!==n&&this.nativeEl?.setAttribute(e,n))}connectedCallback(){this.#o()}}}function a(e){let t=[];for(let n=Object.getPrototypeOf(e);n&&n!==HTMLElement.prototype;n=Object.getPrototypeOf(n)){let e=Object.getOwnPropertyNames(n);t.push(...e)}return t}function o(e){let n=``;for(let r in e){if(!t.includes(r))continue;let i=e[r];i===``?n+=` ${r}`:n+=` ${r}="${i}"`}return n}function s(e){let t={};for(let n of e)t[n.name]=n.value;return t}var c=i(globalThis.HTMLElement??class{},{tag:`video`});i(globalThis.HTMLElement??class{},{tag:`audio`});var l=class extends Event{track;constructor(e,t){super(e),this.track=t.track}},u=new WeakMap;function d(e){return u.get(e)??f(e,{})}function f(e,t){let n=u.get(e);return n||u.set(e,n={}),Object.assign(n,t)}function p(e,t){let n=e.videoTracks;d(t).media=e,d(t).renditionSet||(d(t).renditionSet=new Set);let r=d(n).trackSet;r.add(t);let i=r.size-1;i in g.prototype||Object.defineProperty(g.prototype,i,{get(){return[...d(this).trackSet][i]}}),queueMicrotask(()=>{n.dispatchEvent(new l(`addtrack`,{track:t}))})}function m(e){let t=d(e).media?.videoTracks;t&&(d(t).trackSet.delete(e),queueMicrotask(()=>{t.dispatchEvent(new l(`removetrack`,{track:e}))}))}function h(e){let t=d(e).media.videoTracks??[],n=!1;for(let r of t)r!==e&&(r.selected=!1,n=!0);if(n){if(d(t).changeRequested)return;d(t).changeRequested=!0,queueMicrotask(()=>{delete d(t).changeRequested,t.dispatchEvent(new Event(`change`))})}}var g=class extends EventTarget{#e;#t;#n;constructor(){super(),d(this).trackSet=new Set}get#r(){return d(this).trackSet}[Symbol.iterator](){return this.#r.values()}get length(){return this.#r.size}getTrackById(e){return[...this.#r].find(t=>t.id===e)??null}get selectedIndex(){return[...this.#r].findIndex(e=>e.selected)}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&=(this.removeEventListener(`addtrack`,this.#e),void 0),typeof e==`function`&&(this.#e=e,this.addEventListener(`addtrack`,e))}get onremovetrack(){return this.#t}set onremovetrack(e){this.#t&&=(this.removeEventListener(`removetrack`,this.#t),void 0),typeof e==`function`&&(this.#t=e,this.addEventListener(`removetrack`,e))}get onchange(){return this.#n}set onchange(e){this.#n&&=(this.removeEventListener(`change`,this.#n),void 0),typeof e==`function`&&(this.#n=e,this.addEventListener(`change`,e))}},_=class extends Event{rendition;constructor(e,t){super(e),this.rendition=t.rendition}};function v(e,t){let n=d(e).media.videoRenditions;d(t).media=d(e).media,d(t).track=e;let r=d(e).renditionSet;r.add(t);let i=r.size-1;i in S.prototype||Object.defineProperty(S.prototype,i,{get(){return x(this)[i]}}),queueMicrotask(()=>{e.selected&&n.dispatchEvent(new _(`addrendition`,{rendition:t}))})}function y(e){let t=d(e).media.videoRenditions,n=d(e).track;d(n).renditionSet.delete(e),queueMicrotask(()=>{d(e).track.selected&&t.dispatchEvent(new _(`removerendition`,{rendition:e}))})}function b(e){let t=d(e).media.videoRenditions;!t||d(t).changeRequested||(d(t).changeRequested=!0,queueMicrotask(()=>{delete d(t).changeRequested,d(e).track.selected&&t.dispatchEvent(new Event(`change`))}))}function x(e){return[...d(e).media.videoTracks].filter(e=>e.selected).flatMap(e=>[...d(e).renditionSet])}var S=class extends EventTarget{#e;#t;#n;[Symbol.iterator](){return x(this).values()}get length(){return x(this).length}getRenditionById(e){return x(this).find(t=>`${t.id}`==`${e}`)??null}get selectedIndex(){return x(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[t,n]of x(this).entries())n.selected=t===e}get onaddrendition(){return this.#e}set onaddrendition(e){this.#e&&=(this.removeEventListener(`addrendition`,this.#e),void 0),typeof e==`function`&&(this.#e=e,this.addEventListener(`addrendition`,e))}get onremoverendition(){return this.#t}set onremoverendition(e){this.#t&&=(this.removeEventListener(`removerendition`,this.#t),void 0),typeof e==`function`&&(this.#t=e,this.addEventListener(`removerendition`,e))}get onchange(){return this.#n}set onchange(e){this.#n&&=(this.removeEventListener(`change`,this.#n),void 0),typeof e==`function`&&(this.#n=e,this.addEventListener(`change`,e))}},C=class{src;id;width;height;bitrate;frameRate;codec;#e=!1;get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,b(this))}},w=class{id;kind;label=``;language=``;sourceBuffer;#e=!1;addRendition(e,t,n,r,i,a){let o=new C;return o.src=e,o.width=t,o.height=n,o.frameRate=a,o.bitrate=i,o.codec=r,v(this,o),o}removeRendition(e){y(e)}get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,e===!0&&h(this))}};function T(e,t){let n=d(e).media.audioRenditions;d(t).media=d(e).media,d(t).track=e;let r=d(e).renditionSet;r.add(t);let i=r.size-1;i in k.prototype||Object.defineProperty(k.prototype,i,{get(){return O(this)[i]}}),queueMicrotask(()=>{e.enabled&&n.dispatchEvent(new _(`addrendition`,{rendition:t}))})}function E(e){let t=d(e).media.audioRenditions,n=d(e).track;d(n).renditionSet.delete(e),queueMicrotask(()=>{d(e).track.enabled&&t.dispatchEvent(new _(`removerendition`,{rendition:e}))})}function D(e){let t=d(e).media.audioRenditions;!t||d(t).changeRequested||(d(t).changeRequested=!0,queueMicrotask(()=>{delete d(t).changeRequested,d(e).track.enabled&&t.dispatchEvent(new Event(`change`))}))}function O(e){return[...d(e).media.audioTracks].filter(e=>e.enabled).flatMap(e=>[...d(e).renditionSet])}var k=class extends EventTarget{#e;#t;#n;[Symbol.iterator](){return O(this).values()}get length(){return O(this).length}getRenditionById(e){return O(this).find(t=>`${t.id}`==`${e}`)??null}get selectedIndex(){return O(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[t,n]of O(this).entries())n.selected=t===e}get onaddrendition(){return this.#e}set onaddrendition(e){this.#e&&=(this.removeEventListener(`addrendition`,this.#e),void 0),typeof e==`function`&&(this.#e=e,this.addEventListener(`addrendition`,e))}get onremoverendition(){return this.#t}set onremoverendition(e){this.#t&&=(this.removeEventListener(`removerendition`,this.#t),void 0),typeof e==`function`&&(this.#t=e,this.addEventListener(`removerendition`,e))}get onchange(){return this.#n}set onchange(e){this.#n&&=(this.removeEventListener(`change`,this.#n),void 0),typeof e==`function`&&(this.#n=e,this.addEventListener(`change`,e))}},A=class{src;id;bitrate;codec;#e=!1;get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,D(this))}};function j(e,t){let n=e.audioTracks;d(t).media=e,d(t).renditionSet||(d(t).renditionSet=new Set);let r=d(n).trackSet;r.add(t);let i=r.size-1;i in P.prototype||Object.defineProperty(P.prototype,i,{get(){return[...d(this).trackSet][i]}}),queueMicrotask(()=>{n.dispatchEvent(new l(`addtrack`,{track:t}))})}function M(e){let t=d(e).media?.audioTracks;t&&(d(t).trackSet.delete(e),queueMicrotask(()=>{t.dispatchEvent(new l(`removetrack`,{track:e}))}))}function N(e){let t=d(e).media.audioTracks;!t||d(t).changeRequested||(d(t).changeRequested=!0,queueMicrotask(()=>{delete d(t).changeRequested,t.dispatchEvent(new Event(`change`))}))}var P=class extends EventTarget{#e;#t;#n;constructor(){super(),d(this).trackSet=new Set}get#r(){return d(this).trackSet}[Symbol.iterator](){return this.#r.values()}get length(){return this.#r.size}getTrackById(e){return[...this.#r].find(t=>t.id===e)??null}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&=(this.removeEventListener(`addtrack`,this.#e),void 0),typeof e==`function`&&(this.#e=e,this.addEventListener(`addtrack`,e))}get onremovetrack(){return this.#t}set onremovetrack(e){this.#t&&=(this.removeEventListener(`removetrack`,this.#t),void 0),typeof e==`function`&&(this.#t=e,this.addEventListener(`removetrack`,e))}get onchange(){return this.#n}set onchange(e){this.#n&&=(this.removeEventListener(`change`,this.#n),void 0),typeof e==`function`&&(this.#n=e,this.addEventListener(`change`,e))}},F=class{id;kind;label=``;language=``;sourceBuffer;#e=!1;addRendition(e,t,n){let r=new A;return r.src=e,r.codec=t,r.bitrate=n,T(this,r),r}removeRendition(e){E(e)}get enabled(){return this.#e}set enabled(e){this.#e!==e&&(this.#e=e,N(this))}},I=z(globalThis.HTMLMediaElement,`video`),L=z(globalThis.HTMLMediaElement,`audio`);function R(e){if(!e?.prototype)return e;let t=z(e,`video`);(!t||`${t}`.includes(`[native code]`))&&Object.defineProperty(e.prototype,`videoTracks`,{get(){return B(this)}});let n=z(e,`audio`);(!n||`${n}`.includes(`[native code]`))&&Object.defineProperty(e.prototype,`audioTracks`,{get(){return V(this)}}),`addVideoTrack`in e.prototype||(e.prototype.addVideoTrack=function(e,t=``,n=``){let r=new w;return r.kind=e,r.label=t,r.language=n,p(this,r),r}),`removeVideoTrack`in e.prototype||(e.prototype.removeVideoTrack=m),`addAudioTrack`in e.prototype||(e.prototype.addAudioTrack=function(e,t=``,n=``){let r=new F;return r.kind=e,r.label=t,r.language=n,j(this,r),r}),`removeAudioTrack`in e.prototype||(e.prototype.removeAudioTrack=M),`videoRenditions`in e.prototype||Object.defineProperty(e.prototype,`videoRenditions`,{get(){return r(this)}});let r=e=>{let t=d(e).videoRenditions;return t||(t=new S,d(t).media=e,d(e).videoRenditions=t),t};`audioRenditions`in e.prototype||Object.defineProperty(e.prototype,`audioRenditions`,{get(){return i(this)}});let i=e=>{let t=d(e).audioRenditions;return t||(t=new k,d(t).media=e,d(e).audioRenditions=t),t};return e}function z(e,t){if(e?.prototype)return Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`)?.get}function B(e){let t=d(e).videoTracks;if(!t&&(t=new g,d(e).videoTracks=t,I)){let n=I.call(e.nativeEl??e);for(let t of n)p(e,t);n.addEventListener(`change`,()=>{t.dispatchEvent(new Event(`change`))}),n.addEventListener(`addtrack`,r=>{if([...t].some(e=>e instanceof w)){for(let e of n)m(e);return}p(e,r.track)}),n.addEventListener(`removetrack`,e=>{m(e.track)})}return t}function V(e){let t=d(e).audioTracks;if(!t&&(t=new P,d(e).audioTracks=t,L)){let n=L.call(e.nativeEl??e);for(let t of n)j(e,t);n.addEventListener(`change`,()=>{t.dispatchEvent(new Event(`change`))}),n.addEventListener(`addtrack`,r=>{if([...t].some(e=>e instanceof F)){for(let e of n)M(e);return}j(e,r.track)}),n.addEventListener(`removetrack`,e=>{M(e.track)})}return t}export{c as n,R as t};